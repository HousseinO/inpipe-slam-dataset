<?xml version="1.0"?>
<robot name="inpipe_sensors_vlp16_l515" xmlns:xacro="http://www.ros.org/wiki/xacro">


<link name="gazebo_world"/>

<joint name="world_to_base" type="fixed">
  <parent link="gazebo_world"/>
  <child link="base_link"/>
  <origin xyz="0 0 0" rpy="0 0 0"/>
</joint>

<!-- LEFT sonar -->
<link name="sonar_left_link">
  <visual>
    <origin xyz="0 0 0" rpy="0 0 0"/>
    <geometry><cylinder radius="0.01" length="0.02"/></geometry>
    <material name="black"><color rgba="0.1 0.1 0.1 1"/></material>
  </visual>
  <collision>
    <geometry><cylinder radius="0.01" length="0.02"/></geometry>
  </collision>
  <inertial>
    <mass value="0.02"/>
    <inertia ixx="1e-5" iyy="1e-5" izz="1e-5" ixy="0" ixz="0" iyz="0"/>
  </inertial>
</link>

<joint name="base_to_sonar_left" type="fixed">
  <!-- ~6 cm to the left of the camera -->
  <origin xyz="0.08 0.06 0" rpy="0 0 0"/>
  <parent link="base_link"/>
  <child  link="sonar_left_link"/>
</joint>

<!-- RIGHT sonar -->
<link name="sonar_right_link">
  <visual>
    <origin xyz="0 0 0" rpy="0 0 0"/>
    <geometry><cylinder radius="0.01" length="0.02"/></geometry>
    <material name="black"><color rgba="0.1 0.1 0.1 1"/></material>
  </visual>
  <collision>
    <geometry><cylinder radius="0.01" length="0.02"/></geometry>
  </collision>
  <inertial>
    <mass value="0.02"/>
    <inertia ixx="1e-5" iyy="1e-5" izz="1e-5" ixy="0" ixz="0" iyz="0"/>
  </inertial>
</link>

<joint name="base_to_sonar_right" type="fixed">
  <!-- ~6 cm to the right of the camera -->
  <origin xyz="0.08 -0.06 0" rpy="0 0 0"/>
  <parent link="base_link"/>
  <child  link="sonar_right_link"/>
</joint>

<!-- Laser Profiler -->
<link name="laser_profiler_link">
  <visual>
    <origin xyz="0 0 0" rpy="0 0 0"/>
    <geometry><cylinder radius="0.01" length="0.02"/></geometry>
    <material name="black"><color rgba="0.1 0.1 0.1 1"/></material>
  </visual>
  <collision>
    <geometry><cylinder radius="0.01" length="0.02"/></geometry>
  </collision>
  <inertial>
    <mass value="0.02"/>
    <inertia ixx="1e-5" iyy="1e-5" izz="1e-5" ixy="0" ixz="0" iyz="0"/>
  </inertial>
</link>

<!--<joint name="base_to_laser_profiler" type="fixed">-->
<!--  <origin xyz="0.7 -0.06 0" rpy="0 1.5708 0"/>-->
<!--  <parent link="base_link"/>-->
<!--  <child  link="laser_profiler_link"/>-->
<!--</joint>-->

<joint name="base_to_laser_profiler" type="fixed">
  <origin xyz="0.3 0.06 0" rpy="0 1.5708 0"/>
  <parent link="base_link"/>
  <child  link="laser_profiler_link"/>
</joint>


  <!-- ================= Base ================= -->
  <link name="base_link">
    <inertial>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <mass value="1.0"/>
      <inertia ixx="0.002" ixy="0" ixz="0" iyy="0.002" iyz="0" izz="0.002"/>
    </inertial>
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry><cylinder radius="0.07" length="0.05"/></geometry>
      <material name="Gray"><color rgba="0.5 0.5 0.5 1"/></material>
    </visual>
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry><cylinder radius="0.07" length="0.05"/></geometry>
    </collision>
  </link>

  <!-- ================= VLP16-like LiDAR link ================= -->
  <link name="lidar_link">
    <inertial>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <mass value="0.3"/>
      <inertia ixx="0.0005" ixy="0" ixz="0" iyy="0.0005" iyz="0" izz="0.0005"/>
    </inertial>
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry><cylinder radius="0.03" length="0.02"/></geometry>
      <material name="Blue"><color rgba="0.2 0.4 0.9 1"/></material>
    </visual>
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry><cylinder radius="0.03" length="0.02"/></geometry>
    </collision>
  </link>
  
  <link name="rplidar_link">
    <inertial>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <mass value="0.3"/>
      <inertia ixx="0.0005" ixy="0" ixz="0" iyy="0.0005" iyz="0" izz="0.0005"/>
    </inertial>
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry><cylinder radius="0.03" length="0.02"/></geometry>
      <material name="Blue"><color rgba="0.2 0.4 0.9 1"/></material>
    </visual>
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry><cylinder radius="0.03" length="0.02"/></geometry>
    </collision>
  </link>

  <!-- ================= L515-like sensor link ================= -->
  <link name="l515_link">
    <inertial>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <mass value="0.1"/>
      <inertia ixx="0.0002" ixy="0" ixz="0" iyy="0.0002" iyz="0" izz="0.0002"/>
    </inertial>
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry><cylinder radius="0.03" length="0.026"/></geometry>
      <material name="Black"><color rgba="0.1 0.1 0.1 1"/></material>
    </visual>
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry><cylinder radius="0.03" length="0.026"/></geometry>
    </collision>
  </link>

  <!-- ================= Fixed joints (both to base_link) ================= -->
  <joint name="base_to_lidar" type="fixed">
    <parent link="base_link"/>
    <child link="lidar_link"/>
    <origin xyz="0.2 0 0.08" rpy="0 0.523599 0"/>  <!-- offset forward & up 0.523599 --> 
  </joint>
  
  <joint name="base_to_rplidar" type="fixed">
    <parent link="base_link"/>
    <child link="rplidar_link"/>
    <origin xyz="0.08 0 0.08" rpy="0 0 0"/>  <!-- offset forward & up -->
  </joint>
  
  

  <joint name="base_to_l515" type="fixed">
    <parent link="base_link"/>
    <child link="l515_link"/>
    <origin xyz="0.0 0 0.0" rpy="0 0 0"/> <!-- offset backward & up -->
  </joint>
<!--   Optical frames (REP-103) -->
  <link name="l515_depth_optical_frame"/>
  <joint name="l515_depth_optical_joint" type="fixed">
    <parent link="l515_link"/>
    <child  link="l515_depth_optical_frame"/>
    <origin xyz="0 0 0" rpy="-1.5708 0 -1.5708"/>
  </joint>
  <link name="l515_color_optical_frame"/>
  <joint name="l515_color_optical_joint" type="fixed">
    <parent link="l515_link"/>
    <child  link="l515_color_optical_frame"/>
    <origin xyz="0 0 0" rpy="-1.5708 0 -1.5708"/>
  </joint>
  
<!--  <link name="l515_depth_optical_frame"/>-->
<!--  <joint name="l515_depth_optical_joint" type="fixed">-->
<!--    <parent link="l515_link"/>-->
<!--    <child  link="l515_depth_optical_frame"/>-->
<!--    <origin xyz="0 0 0" rpy="0 0 0"/>-->
<!--  </joint>-->
<!--  <link name="l515_color_optical_frame"/>-->
<!--  <joint name="l515_color_optical_joint" type="fixed">-->
<!--    <parent link="l515_link"/>-->
<!--    <child  link="l515_color_optical_frame"/>-->
<!--    <origin xyz="0 0 0" rpy="0 0 0"/>-->
<!--  </joint>-->

  <!-- ================= Gazebo ROS core ================= -->
  <gazebo>
    <plugin name="ros_init" filename="libgazebo_ros_init.so"/>
    <plugin name="ros_factory" filename="libgazebo_ros_factory.so"/>
  </gazebo>
  
  
  <gazebo reference="rplidar_link">
    <sensor name="rplidar_like" type="ray">
      <update_rate>10</update_rate> <!-- 10 Hz ~ 600 RPM -->
      <ray>
        <scan>
          <horizontal>
            <samples>1800</samples>     <!-- ~0.2° azimuth -->
            <resolution>1</resolution>
            <min_angle>-3.14159265359</min_angle>
            <max_angle> 3.14159265359</max_angle>
          </horizontal>
        </scan>
        <range>
          <min>0.1</min>
          <max>100.0</max>
          <resolution>0.01</resolution>
        </range>
        <noise>
          <type>gaussian</type>
          <mean>0.0</mean>
          <stddev>0.02</stddev>
        </noise>
      </ray>

      <plugin name="rplidar_ros" filename="libgazebo_ros_ray_sensor.so">
        <ros>
          <namespace>/inpipe_bot</namespace>
          <remapping>~/out:=/inpipe_bot/rplidar/points</remapping>
        </ros>
        <output_type>sensor_msgs/PointCloud2</output_type>
        <frame_name>rplidar_link</frame_name>
      </plugin>
    </sensor>
  </gazebo>
  
  
  <gazebo reference="laser_profiler_link">
    <sensor name="laser_profiler_like" type="ray">
      <update_rate>10</update_rate> 
      <ray>
        <scan>
          <horizontal>
            <samples>1800</samples>     
            <resolution>1</resolution>
            <min_angle>-3.14159265359</min_angle>
            <max_angle> 3.14159265359</max_angle>
          </horizontal>
        </scan>
        <range>
          <min>0.1</min>
          <max>100.0</max>
          <resolution>0.00</resolution>
        </range>
        <noise>
          <type>gaussian</type>
          <mean>0.0</mean>
          <stddev>0.00</stddev>
        </noise>
      </ray>

      <plugin name="laser_profiler_ros" filename="libgazebo_ros_ray_sensor.so">
        <ros>
          <namespace>/inpipe_bot</namespace>
          <remapping>~/out:=/inpipe_bot/laser_profiler/points</remapping>
        </ros>
        <output_type>sensor_msgs/PointCloud2</output_type>
        <frame_name>laser_profiler_link</frame_name>
      </plugin>
    </sensor>
  </gazebo>

  <!-- ================= VLP16-like multi-ray sensor ================= -->
<!--  <gazebo reference="lidar_link">-->
<!--    <sensor name="vlp16_like" type="ray">-->
<!--      <update_rate>10</update_rate> -->
<!--      <ray>-->
<!--        <scan>-->
<!--          <horizontal>-->
<!--            <samples>1800</samples>     -->
<!--            <resolution>1</resolution>-->
<!--            <min_angle>-3.14159265359</min_angle>-->
<!--            <max_angle> 3.14159265359</max_angle>-->
<!--          </horizontal>-->
<!--          <vertical>-->
<!--            <samples>16</samples>       -->
<!--            <resolution>1</resolution>-->
<!--            <min_angle>-0.2617993878</min_angle>  -->
<!--            <max_angle> 0.2617993878</max_angle>  -->
<!--          </vertical>-->
<!--        </scan>-->
<!--        <range>-->
<!--          <min>0.1</min>-->
<!--          <max>100.0</max>-->
<!--          <resolution>0.01</resolution>-->
<!--        </range>-->
<!--        <noise>-->
<!--          <type>gaussian</type>-->
<!--          <mean>0.0</mean>-->
<!--          <stddev>0.02</stddev>-->
<!--        </noise>-->
<!--      </ray>-->

<!--      <plugin name="vlp16_ros" filename="libgazebo_ros_ray_sensor.so">-->
<!--        <ros>-->
<!--          <namespace>/inpipe_bot</namespace>-->
<!--          <remapping>~/out:=/inpipe_bot/lidar/points</remapping>-->
<!--        </ros>-->
<!--        <output_type>sensor_msgs/PointCloud2</output_type>-->
<!--        <frame_name>lidar_link</frame_name>-->
<!--      </plugin>-->
<!--    </sensor>-->
<!--  </gazebo>-->

<gazebo reference="lidar_link">
  <sensor name="mid360_like" type="ray">
    <always_on>true</always_on>
    <visualize>true</visualize>
    <!-- MID-360 frame rate -->
    <update_rate>10</update_rate>  <!-- 10 Hz -->

    <ray>
      <scan>
        <!--=============================-->
        <!--     HORIZONTAL FOV = 360°   -->
        <!--=============================-->
        <horizontal>
          <!-- Visualization only — actual Livox pattern comes from plugin -->
          <samples>720</samples>               <!-- 0.5° angular step -->
          <resolution>1</resolution>
          <min_angle>-3.14159265359</min_angle> <!--  -180° -->
          <max_angle> 3.14159265359</max_angle> <!--  +180° -->
        </horizontal>

        <!--==============================================-->
        <!--  VERTICAL FOV = -7° to +52° (MID-360 specs)  -->
        <!--==============================================-->
        <vertical>
          <samples>60</samples>                <!-- ~1° angular step -->
          <resolution>1</resolution>
          <min_angle>-0.1221730476</min_angle> <!--  -7°  -->
          <max_angle> 0.9075712110</max_angle> <!-- +52° -->
        </vertical>
      </scan>

      <!--=========================-->
      <!--     RANGE (MID-360)     -->
      <!--=========================-->
      <range>
        <min>0.1</min>          <!-- Blind zone: 0.1 m -->
        <max>70.0</max>         <!-- 70 m @ 80% reflectivity -->
        <resolution>0.01</resolution>  <!-- 1 cm -->
      </range>

      <!--========================================-->
      <!--   RANGE NOISE (1σ ≈ 2 cm @ 10 m)       -->
      <!--========================================-->
      <noise>
        <type>gaussian</type>
        <mean>0.0</mean>
        <stddev>0.02</stddev>  <!-- 2 cm -->
      </noise>
    </ray>

    <!--=====================================================-->
    <!--      ROS plugin output — same style as VLP16        -->
    <!--=====================================================-->
    <plugin name="mid360_ros" filename="libgazebo_ros_ray_sensor.so">
      <ros>
        <namespace>/inpipe_bot</namespace>
        <remapping>~/out:=/inpipe_bot/lidar/points</remapping>
      </ros>
      <output_type>sensor_msgs/PointCloud2</output_type>
      <frame_name>lidar_link</frame_name>
    </plugin>
  </sensor>
</gazebo>


  <!-- ================= L515-like depth sensor (depth + optional RGB) ================= -->
  <gazebo reference="l515_link">
    <sensor name="l515_depth" type="depth">
      <always_on>true</always_on>
      <update_rate>10</update_rate>
      <visualize>false</visualize>
      <camera>
        <horizontal_fov>1.2217304764</horizontal_fov> <!-- ~70 deg -->
        <image>
          <width>640</width>
          <height>480</height>
          <format>R8G8B8</format>
          <noise>
          <type>gaussian</type>
          <mean>0.9</mean>
          <stddev>0.1</stddev>  <!-- 5 mm noise -->
        </noise>
        </image>
        <clip>
          <near>0.25</near>
<!--          <far>9.0</far>-->
          <far>4.0</far>
        </clip>
        
      </camera>
      <plugin name="gazebo_ros_depth_camera" filename="libgazebo_ros_camera.so">
        <ros>
          <namespace>/inpipe_bot/l515</namespace>
          <remapping>~/camera_info_depth:=/inpipe_bot/l515/depth/image_raw</remapping>
          <remapping>~/camera_info:=/inpipe_bot/l515/depth/camera_info</remapping>
          <remapping>~/image_depth:=/inpipe_bot/l515/depth/image_depth</remapping>
          <remapping>~/points:=/inpipe_bot/l515/depth/points</remapping>
          <remapping>~/image_raw:=/inpipe_bot/l515/depth/image_raw</remapping>
        </ros>
        <frame_name>l515_depth_optical_frame</frame_name>
        <pointCloud>true</pointCloud>
        <pointCloudCutoff>0.25</pointCloudCutoff>
        <pointCloudCutoffMax>9.0</pointCloudCutoffMax>
        <pointCloudNoise>true</pointCloudNoise>
      <pointCloudNoiseType>gaussian</pointCloudNoiseType>
      <pointCloudNoiseMean>0.9</pointCloudNoiseMean>
      <pointCloudNoiseStddev>0.01</pointCloudNoiseStddev>
      </plugin>
    </sensor>

    <!-- Optional RGB camera stream -->
    <sensor name="l515_rgb" type="camera">
      <always_on>true</always_on>
      <update_rate>30</update_rate>
      <visualize>false</visualize>
      <camera>
        <horizontal_fov>1.2217304764</horizontal_fov>
        <image>
          <width>1920</width>
          <height>1080</height>
          <format>R8G8B8</format>
        </image>
<!--        <noise>-->
<!--          <type>gaussian</type>-->
<!--          <mean>0.9</mean>-->
<!--          <stddev>0.1</stddev>-->
<!--        </noise>-->
        <clip>
          <near>0.25</near>
          <far>15.0</far>
        </clip>
      </camera>
      <plugin name="gazebo_ros_camera" filename="libgazebo_ros_camera.so">
        <ros>
          <namespace>/inpipe_bot/l515</namespace>
          <remapping>~/image:=/inpipe_bot/l515/color/image_raw</remapping>
          <remapping>~/camera_info:=/inpipe_bot/l515/color/camera_info</remapping>
        </ros>
        <frame_name>l515_color_optical_frame</frame_name>
      </plugin>
    </sensor>
  </gazebo>
  
  <gazebo reference="base_link">
    <gravity>false</gravity>
    <self_collide>false</self_collide>
  </gazebo>
  
  <gazebo>
  <plugin name="gazebo_ros_p3d" filename="libgazebo_ros_p3d.so">
    <ros>
      <namespace>/inpipe_bot</namespace>
      <argument>odom:=p3d_demo</argument>
    </ros>
    <frame_name>base_link</frame_name>
    <body_name>gazebo_world</body_name>
    <update_rate>30.0</update_rate>
    <gaussian_noise>0.0</gaussian_noise>
  </plugin>
</gazebo>


<!-- LEFT sonar sensor -->
<gazebo reference="sonar_left_link">
  <sensor name="sonar_left" type="ray">
    <always_on>true</always_on>
    <update_rate>200</update_rate>  <!-- slower than LiDAR -->
    <visualize>true</visualize>

    <ray>
      <scan>
        <horizontal>
          <samples>80</samples>
          <resolution>1</resolution>
          <min_angle>-0.0174533*2</min_angle>  <!-- -15° -->
          <max_angle> 0.0174533*2</max_angle>  <!-- +15° -->
        </horizontal>
        <vertical>
          <samples>50</samples>
          <resolution>1</resolution>
          <min_angle>-0.0174533*2</min_angle>  <!-- -10° -->
          <max_angle> 0.0174533*2</max_angle>  <!-- +10° -->
        </vertical>
      </scan>
      <range>
        <min>0.02</min>
        <max>10</max>         <!-- GY-US42 max range -->
        <resolution>0.01</resolution>
      </range>
      <noise>
        <type>gaussian</type>
        <mean>0.0</mean>
        <stddev>0.001</stddev>
      </noise>
    </ray>

    <plugin name="gazebo_ros_sonar" filename="libgazebo_ros_ray_sensor.so">
      <ros>
        <namespace>/inpipe_bot</namespace>
        <remapping>~/out:=sonar/left/range</remapping>
        <output_type>Range</output_type>
      </ros>
      <frame_name>sonar_left_link</frame_name>
    </plugin>
  </sensor>
</gazebo>



<!-- RIGHT sonar sensor -->
<gazebo reference="sonar_right_link">
  <sensor name="sonar_right" type="ray">
    <always_on>true</always_on>
    <update_rate>15</update_rate>
    <visualize>true</visualize>
    <ray>
      <scan>
        <horizontal>
          <samples>80</samples>
          <resolution>1</resolution>
          <min_angle>-0.0174533*2</min_angle>
          <max_angle> 0.0174533*2</max_angle>
        </horizontal>
        <vertical>
          <samples>50</samples>
          <resolution>1</resolution>
          <min_angle>-0.0174533*2</min_angle>
          <max_angle>0.0174533*2</max_angle>
        </vertical>
      </scan>
      <range>
        <min>0.02</min>
        <max>10.0</max>
        <resolution>0.01</resolution>
      </range>
      <noise>
        <type>gaussian</type>
        <mean>0.0</mean>
        <stddev>0.001</stddev>
      </noise>
    </ray>

    <plugin name="gazebo_ros_sonar_right" filename="libgazebo_ros_ray_sensor.so">
      <ros>
        <namespace>/inpipe_bot</namespace>
        <remapping>~/out:=sonar/right/range</remapping>
        <output_type>Range</output_type>
      </ros>
      <frame_name>sonar_right_link</frame_name>
    </plugin>
  </sensor>
</gazebo>


<!-- ============ IMU ============ -->
<link name="imu_link">
<visual>
<origin xyz="0 0 0" rpy="0 0 0"/>
<geometry><box size="0.03 0.03 0.01"/></geometry>
<material name="blue"><color rgba="0.2 0.4 0.8 1"/></material>
</visual>
<collision>
<origin xyz="0 0 0" rpy="0 0 0"/>
<geometry><box size="0.03 0.03 0.01"/></geometry>
</collision>
<inertial>
<origin xyz="0 0 0" rpy="0 0 0"/>
<mass value="0.03"/>
<inertia ixx="1e-5" ixy="0" ixz="0" iyy="1e-5" iyz="0" izz="2e-5"/>
</inertial>
</link>


<joint name="base_to_imu" type="fixed">
<!-- Adjust pose relative to base_link as needed -->
<origin xyz="0 0 0.0" rpy="0 0 0"/>
<parent link="base_link"/>
<child link="imu_link"/>
</joint>


<!-- Gazebo IMU sensor publishing to ROS 2 -->
<gazebo reference="imu_link">
<sensor name="imu_sensor" type="imu">
<always_on>true</always_on>
<update_rate>200</update_rate>
<visualize>false</visualize>


<!-- Simple noise model (tweak to match your IMU) -->
<imu>
<orientation>
<x>
<noise type="gaussian">
<mean>0.0</mean>
<stddev>0.001</stddev>
<bias_mean>0.0</bias_mean>
<bias_stddev>0.0001</bias_stddev>
</noise>
</x>
<y>
<noise type="gaussian">
<mean>0.0</mean>
<stddev>0.001</stddev>
<bias_mean>0.0</bias_mean>
<bias_stddev>0.0001</bias_stddev>
</noise>
</y>
<z>
<noise type="gaussian">
<mean>0.0</mean>
<stddev>0.001</stddev>
<bias_mean>0.0</bias_mean>
<bias_stddev>0.0001</bias_stddev>
</noise>
</z>
</orientation>
<angular_velocity>
<x>
<noise type="gaussian">
<mean>0.0</mean>
<stddev>0.001</stddev>
<bias_mean>0.0</bias_mean>
<bias_stddev>0.0001</bias_stddev>
</noise>
</x>
<y>
<noise type="gaussian">
<mean>0.0</mean>
<stddev>0.001</stddev>
<bias_mean>0.0</bias_mean>
<bias_stddev>0.0001</bias_stddev>
</noise>
</y>
<z>
<noise type="gaussian">
<mean>0.0</mean>
<stddev>0.001</stddev>
<bias_mean>0.0</bias_mean>
<bias_stddev>0.0001</bias_stddev>
</noise>
</z>
</angular_velocity>
<linear_acceleration>
<x>
<noise type="gaussian">
<mean>0.0</mean>
<stddev>0.03</stddev>
<bias_mean>0.0</bias_mean>
<bias_stddev>0.001</bias_stddev>
</noise>
</x>
<y>
<noise type="gaussian">
<mean>0.0</mean>
<stddev>0.03</stddev>
<bias_mean>0.0</bias_mean>
<bias_stddev>0.001</bias_stddev>
</noise>
</y>
<z>
<noise type="gaussian">
<mean>0.0</mean>
<stddev>0.03</stddev>
<bias_mean>0.0</bias_mean>
<bias_stddev>0.001</bias_stddev>
</noise>
</z>
</linear_acceleration>
</imu>


<plugin name="imu_plugin" filename="libgazebo_ros_imu_sensor.so">
<ros>
<namespace>/inpipe_bot</namespace>
<!-- Remap internal topic (~/out) to standard /imu -->
<remapping>~/out:=imu/data</remapping>
</ros>
<frame_name>imu_link</frame_name>
</plugin>
</sensor>
</gazebo>


  <!-- ============ Optional: publish Gazebo state to TF ============ -->
  <gazebo>
    <plugin name="tf_publisher" filename="libgazebo_ros_state.so">
      <ros>
        <namespace>/inpipe_bot</namespace>
      </ros>
      <publish_tf>true</publish_tf>
      <update_rate>30</update_rate>
    </plugin>
  </gazebo>



</robot>
